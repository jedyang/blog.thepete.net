---
layout: post
title: "Frank: Automated Acceptance Tests for iPhone and iPad"
date: 2010-07-23T16:48:00-07:00
comments: false
---

<div class='post'>
<p>Recently I joined a team developing an iPad application. The application had no existing automated tests, and the team was under a tight deadline to deliver on promised functionality. Faced with similar circumstances in the past I have advocated introducing automated UI-driven acceptance tests to establish a loose but broad test coverage net. After a brief investigation we decided that the available tools weren't quite what we needed, so we built our own 'Frankenstein's Monster' by plumbing together several existing open source libraries to create <a href="http://github.com/moredip/Frank">a light-weight UI automation framework for iPhone and iPad applications, called Frank.</a></p><br />
<h2>How does Frank work?</h2><p>In use Frank consists of two main parts. There is a small objective-C server which is compiled into the iOS application you want to automate. You then use a remote driver from within your automated testing framework of choice to send automation commands to the Frank server and interpret the responses sent back.</p><img src="http://github.com/moredip/frank/raw/master/doc/Frank%20Architecture.png" alt="Frank Architecture Overview"><br />
<p>Currently the project includes a Cucumber driver. Creating additional drivers (for RSpec, NUnit or JBehave perhaps) is a pretty trivial task, as the Frank server provides just a few key commands.</p><br />
<h2>I don't get it. Show me moving pictures!</h2><p>Here is a brief screencast which demonstrates a Cucumber test suite exercising the functionality of a simple iPhone app via Frank. [<a target="_blank" href="http://sl.thepete.net/frank_ea_demo">Click Here</a> to watch the screencast in a larger window]</p><object id="scPlayer" class="embeddedObject" width="950" height="642" type="application/x-shockwave-flash" data="http://content.screencast.com/users/PeteHodgson/folders/Jing/media/0f35802c-684a-49bd-bb7a-b141e4d2c689/jingswfplayer.swf" >  <param name="movie" value="http://content.screencast.com/users/PeteHodgson/folders/Jing/media/0f35802c-684a-49bd-bb7a-b141e4d2c689/jingswfplayer.swf" /><param name="quality" value="high" /><param name="bgcolor" value="#FFFFFF" /><param name="flashVars" value="thumb=http://content.screencast.com/users/PeteHodgson/folders/Jing/media/0f35802c-684a-49bd-bb7a-b141e4d2c689/FirstFrame.jpg&containerwidth=950&containerheight=642&content=http://content.screencast.com/users/PeteHodgson/folders/Jing/media/0f35802c-684a-49bd-bb7a-b141e4d2c689/00000015.swf&blurover=false" /><param name="allowFullScreen" value="true" /><param name="scale" value="showall" /><param name="allowScriptAccess" value="always" /><param name="base" value="http://content.screencast.com/users/PeteHodgson/folders/Jing/media/0f35802c-684a-49bd-bb7a-b141e4d2c689/" /></object><br />
<p>You can see the Cucumber scenarios and then watch as the Frank driver automates the application in the iPhone simulator, restarting the application between each scenario.</p><br />
<h2>Anything else?</h2><p>Frank has additional functionality which I haven't gone into here. There is a javascript web app called Symbiote which is embedded within your iOS app itself. This allows you to interact with your iOS application as it's running, testing UI selection paths and inspecting the application's DOM in realtime. We also provide Cucumber steps for utility tasks such as recording a test run to video (great for debugging a failing acceptance test within a CI system), rotating the simulated device, and restarting the application between scenarios to ensure independent tests.</p><br />
<h2>Where can I get it?</h2>Frank (plus some more documentation) can be found on github <a href="http://github.com/moredip/Frank">right here</a>.<br />
<br />
<h2>What's coming?</h2><p>The next important step is including our automated acceptance tests within a Continuous Integration build. We intend to run Frank tests upon every checkin, much as you would run Selenium tests for a web application. A failing test will break the build, emailing the team with a video showing the failing test.</p><p>I'm also planning to blog about specific aspects of Frank in greater depth in coming weeks.</p><p>Please do <a href="http://github.com/moredip/Frank">check Frank out</a>, and get in touch if you have any feedback, feature requests, bug reports, or anything else!</p></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>sasikumar</div>
<div class='content'>
how to use it on physical device</div>
</div>
<div class='comment'>
<div class='author'>Abhishek Banerjee</div>
<div class='content'>
Is there a documentation how to run frank test on physical iPad device?<br /><br />Thanks in advance!!!<br /><br />AB</div>
</div>
<div class='comment'>
<div class='author'>SorenToft</div>
<div class='content'>
@EeKay: <br />I have the same problem with the &quot;given i launch the app&quot; today, running Lion with the new Xcode. <br />I fixed it by editing the launch_steps.rb, changing all instances of &quot;4.2&quot; to &quot;4.3&quot;. <br />The new xcode apparently does now have build in iOS 4.2 support.</div>
</div>
<div class='comment'>
<div class='author'>EeKay</div>
<div class='content'>
Hi Pete i&#39;m biting into getting Frank to work on an example Calculator program. Most things work as intended right now. But...<br /><br />The <i>&quot;Given I lanch the app&quot;</i> step implementation doesn&#39;t seem to work. I want to restart my apps every time to - as you indicated also - start with a clean sheet.<br /><br />Right now if i start the simulator and run cucumber. It waits until i run the app, and then pushes the home button (like the step indicates). It then keeps waiting and doesn&#39;t restart the app like intended.<br /><br />I&#39;m working on Mac OS Lion, XCode 4. <br /><br />Could you help me out on this one? (info@eekay.nl) thanks!</div>
</div>
<div class='comment'>
<div class='author'>nikihana</div>
<div class='content'>
Hi Pete,<br /><br />This is a great idea!!<br /><br />I am trying to set this up for iPhone and I can build and run the simulator. I just cannot connect to it from the browser via http://localhost:37265.<br /><br />I also do not get the &quot;Allow incoming connections&quot; dialog.<br /><br />What am I missing?<br /><br />Thanks.<br /><br />Srini</div>
</div>
<div class='comment'>
<div class='author'>cansaner</div>
<div class='content'>
hmm i was trying to test my application against my testing IPAD but I just couldn&#39;t understand even howto set the environment variable for bundle path to show the application working on IPAD :(. Automating rotation does not have huge importance for me, automation on simulator for rotation is enough. For the other matter, I think an operating system wide mechanism like android adb library would be helpful for relaunching the application so even restarting IPAD can be tested(as we can test android mobile handsets for this matter)... But I don&#39;t know iOS has any library or protocol supporting these features, it is your speciality :)</div>
</div>
<div class='comment'>
<div class='author'>Pete Hodgson</div>
<div class='content'>
Yes, it is possible to run Frank tests against a physical device. Two things are more challenging in that scenario. We haven&#39;t figured out a way to automate re-launching the app on the device, and you can&#39;t automate rotation of the device.</div>
</div>
<div class='comment'>
<div class='author'>cansaner</div>
<div class='content'>
I installed and used Frank for some time, looked its code a little and made a little automation test case with it as well and I think it is a great tool among other possible choices. The thing that I wonder is that Frank will be a tool that can test application on the device itself rather than simulator...</div>
</div>
<div class='comment'>
<div class='author'>Pete Hodgson</div>
<div class='content'>
Hi Rodney,<br /><br />I set up a google group for questions about Frank: http://groups.google.com/group/frank-discuss<br /><br />Please do sign up and ask away with any questions you have.</div>
</div>
<div class='comment'>
<div class='author'>RodneyDegracia</div>
<div class='content'>
Frank is really innovative. Thanks for creating it!<br /><br />btw, when I try to &quot;Dump the current DOM&quot; of the iphone app, the result is the following error:<br /><br />HTTP Server: Error 405 - Method Not Allowed: OPTIONS<br /><br /><br />Any ideas why and what the solution would be?<br /><br />Are there any plans to setup a Google group for Frank ?</div>
</div>
<div class='comment'>
<div class='author'>Pete Hodgson</div>
<div class='content'>
One reason we didn&#39;t use UIAutomation for Frank was because it wasn&#39;t available at the time :)<br /><br />Aside from that, UIAutomation seems more targeted towards the record-and-playback style of functional testing. In my experience those type of functional tests are quite brittle. I prefer programmatic functional tests using tools like Cucumber, JBehave.</div>
</div>
<div class='comment'>
<div class='author'>error454</div>
<div class='content'>
Thank you for taking the time to blog about this!<br /><br />I am new to automation on iOS and have been using Instruments to do so.  Can you elaborate a bit more on the  limitations you were hitting in Instruments that made you use Frank?</div>
</div>
<div class='comment'>
<div class='author'>Pete Hodgson</div>
<div class='content'>
Hi Hari, Thanks for the interest.<br /><br />No, Frank doesn&#39;t use UIAutomation. It uses an open source library called UISpec which provides similar capability to UIAutomation.<br /><br />If you&#39;d like to see how Frank is implemented, check out the github repo: http://github.com/moredip/Frank<br /><br />You can also find example test scripts there too: http://github.com/moredip/Frank/blob/master/example/EmployeeAdmin/features/main.feature</div>
</div>
<div class='comment'>
<div class='author'>Hari Sreekanth Upadrasta</div>
<div class='content'>
Hi pete,<br />Thanks for the article.<br />Does frank use uiautomation? <br />can ou show somecode?<br />Regards,</div>
</div>
<div class='comment'>
<div class='author'>Jeff</div>
<div class='content'>
Hi Pete, interesting way of tackling the problem.  <br /><br />I saw an interesting presentation at this year&#39;s WWDC conference (on June 9th 2010) entitled, &quot;UI Automation&quot; by Mike Jurewitz of Developer Tools.  This might be of use for you, for testing on iOS 4.0 and onward.   <br /><br />Please see:<br /><br /><a href="http://developer.apple.com/iphone/library/documentation/DeveloperTools/Reference/UIAutomationRef/Introduction/Introduction.html" rel="nofollow"><b>UI Automation Reference Collection</b></a><br /><br />-J</div>
</div>
</div>
